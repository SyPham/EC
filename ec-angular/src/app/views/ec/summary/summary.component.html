<div class="card">
  <div class="card-header">
    <h3>{{ 'TODOLIST' | translate }}</h3>

  </div>
  <div class="card-body">
    <div class="row" *ngIf="existGlue">
      <div class="col-md-12">
        <table class="table table-bordered">
          <thead>
            <tr>
              <ng-container *ngFor="let item of lineColumns; let i = index">
                <th class="text-center" colspan="2" *ngIf="item.field === 'TotalComsumption'">{{ labelLang(item.field) | translate }}</th>
                <th class="text-center" style="vertical-align: middle;" rowspan="2"
                  *ngIf="item.field !== 'TotalComsumption'">{{ labelLang(item.field) | translate }}</th>
              </ng-container>
              <th style="vertical-align: middle;" class="text-center" rowspan="2">{{ 'COUNT' | translate }}</th>
              <th style="vertical-align: middle;" class="text-center" rowspan="2">{{ 'OPTION' | translate }}</th>
            </tr>
            <tr>
              <th>{{ 'STANDARD' | translate }}</th>
              <th>{{ 'REAL' | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let values of linevalue; let i = index">
              <td class="text-center" *ngFor="let value of values">{{value}}</td>
              <td>
                <div class="btn-group">
                  <button type="button" (click)="mixingSection(values)"
                    class="btn btn-success btn-sm mr-2">{{ 'MIXING' | translate }}</button>
                  <button type="button" (click)="pushHistory(values)" class="btn btn-sm btn-info">{{ 'HISTORY' | translate }}</button>
                </div>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="row" *ngIf="show">
      <div class="col-md-12 my-2">
        <h3 class="text-center text-danger">{{ 'GLUE_NAME' | translate }}: {{makeGlue.name}} </h3>

      </div>
      <div class="col-md-4"></div>
      <div class="col-md-4">
        <!-- <input #scanText id='scanText' autoselect *ngIf="scanStatus; else scanStatusBlock" [(ngModel)]="qrCode" (ngModelChange)='onChangeScanQRCode($event)' name="scanQRCode" autofocus class="form-control form-control-lg" type="text"  />            
        <ng-template #scanStatusBlock>
          <input #scanText id='scanText' autoselect [(ngModel)]="qrCode"  (ngModelChange)='onChangeScanQRCode($event)' name="scanQRCode" class="form-control form-control-lg" type="text"  />            
        </ng-template> -->
      </div>

    </div>

    <div class="row" *ngIf="show">

      <!-- <div class="col-md-4">
        <div class="chart-wrapper">
          <canvas baseChart class="chart" [data]="pieChartData" [labels]="pieChartLabels" [chartType]="pieChartType"
            (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)" [options]="pieChartOptions"
            [plugins]="pieChartPlugins"></canvas>
        </div>
      </div> -->
      <div class="col-md-12">
        <div class="row">
         
          <div class="col-md-2 col-xl-2 text-center">
            <div class="row">
              <div class="col-md-2">
              <label class="font-weight-bold" for="">{{ 'STEP' | translate }}</label>
              </div>
              <div class="col-md-10">
                <label class="font-weight-bold" for="">{{ 'SCAN_QRCODE' | translate }}</label>
              </div>
            </div>
          </div>
          <div class="col-md-4 col-xl-4 text-center">
            <label class="font-weight-bold" for="">{{ 'INGREDIENT_NAME' | translate}}</label>
          </div>
          <div class="col-md-4 col-xl-4 text-center">
            <label class="font-weight-bold" for="">{{ 'EXPECTED' | translate }}</label>
          </div>
          <div class="col-md-2 col-xl-2 text-center">
            <label class="font-weight-bold" for="">{{ 'REAL' | translate }}</label>
          </div>
        </div>

        <ng-container *ngFor="let item of ingredients ;let i=index">
          <div class="row">
            <!-- <div class="col-md-1 col-xl-1 text-center">
              <img *ngIf="showArrow(item)" src="../../../../assets/img/gif/arrow.gif" style="width: 30px;height: 30px;"
                alt="">
            </div> -->
            <div class="col-md-2 col-xl-2">
              <div class="row">
                <div class="col-xl-2">
                  <div class="align-middle">
                    <img *ngIf="showArrow(item)" src="../../../../assets/img/gif/arrow.gif" alt="">
                  </div>
                </div>
                <div class="col-xl-10">
                  <input *ngIf="item.scanStatus; else scanBlock" class="form-control form-control-lg" [autofocus]='item.scanStatus'
                    autoselect [name]="item.code" [(ngModel)]="item.scanCode" [class]="item.info" [ngClass]="lockClass(item)"
                    (ngModelChange)='onNgModelChangeScanQRCode($event, item)' type="text">
                  <ng-template #scanBlock>
                    <input class="form-control form-control-lg" [(ngModel)]="item.scanCode" [name]="item.code" [class]="item.info"
                      [ngClass]="lockClass(item)" (ngModelChange)='onNgModelChangeScanQRCode($event, item)' type="text">
                  </ng-template>
                </div>
              </div>
             
            </div>
            <div class="form-group col-md-4 col-xl-4">
              <input [class]="item.info" class="form-control form-control-lg lock" [value]="item.name + ' ( ' + item.percentage + '% )'"
                type="text">
            </div>
            <div class="form-group col-md-4 col-xl-4">
              <input *ngIf="item.focusExpected; else expectedBlock" 
                      class="form-control form-control-lg" 
                      [value]='item.expected'
                      [autofocus]='item.focusExpected'
                      [class]="item.info" 
                      (keyup)='onKeyupExpected(item, $event)' 
                      type="text">
              <ng-template #expectedBlock>
                <input class="form-control form-control-lg lock" 
                      [value]='item.expected' 
                      [class]="item.info"
                      (keyup)='onKeyupExpected(item, $event)' 
                      type="text">
              </ng-template>
            </div>
            <div class="form-group col-md-2 col-xl-2">
              <input class="form-control form-control-lg"
                     *ngIf="item.focusReal; else realElse" 
                     [value]='item.real' 
                     [id]='item.position'
                     [class]="realClass(item)" 
                     [autofocus]='item.focusReal' 
                     (keyup)='onKeyupReal(item, $event)' 
                    type="text">
              <ng-template #realElse>
                <input class="form-control form-control-lg lock" 
                       [value]='item.real' 
                       [id]='item.position' 
                       [class]="realClass(item)"
                       (keyup)='onKeyupReal(item, $event)' 
                       type="text">
              </ng-template>
            </div>
            <!-- <div class="col-md-1 text-center">
              <img *ngIf="check(item)" src="../../../../assets/img/gif/check.jpg" style="width: 30px;height: 30px;" alt="">
              <img *ngIf="cancel" src="../../../../assets/img/gif/x.png" style="width: 30px;height: 30px;" alt="">
            </div> -->
          </div>
        </ng-container>

        <div class="text-center my-2">
          <button type="button" [disabled]="disabled" (click)="Finish()" class="btn btn-success"><i
              class="fas fa-save"></i>
            {{ 'FINISHED' | translate }}</button>
          <button type="button" (click)="back()" class="btn btn-primary ml-2"><i class="fa fa-arrow-circle-left"></i>
            {{ 'BACK' | translate }}</button>
        </div>
        <p class="text-center my-2 text-danger" *ngIf="!disabled">{{ 'NOTE' | translate }}</p>
      </div>
    </div>
    <div class="row" *ngIf="showQRCode">
      <div class="col-md-4"></div>
      <div class="col-md-4 text-center">
        <button type="button" (click)="back()" class="btn btn-primary ml-2"><i class="fa fa-arrow-circle-left"></i>
          {{ 'BACK' | translate }}</button>
        <button type="button" (click)="printGlue()" class="btn btn-success ml-2"><i class="fa fa-print"></i>
          Print</button>
      </div>
      <div class="col-md-4"></div>
    </div>
    <hr>
    <div class="row" *ngIf="showQRCode">
      <div class="col-md-4"></div>
      <div class="col-md-4 text-center">
        <ejs-qrcodegenerator style="display: block;" [displayText]='displayTextMethod' id='qrcode' #qrcode width="400px"
          height="400px" mode="SVG" [value]="code"></ejs-qrcodegenerator>
        <label id='glueName' for="">{{makeGlue.name }}</label> <br>
        <label id='glueNameExpiredTime' for="">Expired on: {{expiredTime | date:'M/d , h:mm a '}}</label>
      </div>
      <div class="col-md-4"></div>

    </div>

  </div>
</div>